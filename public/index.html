<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>김동명, 남예빈 결혼식 초대합니다.</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/style.scss" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"
    />
    <link rel="stylesheet" href="/styles/vendor/jquery.fancybox.min.css" />

    <!-- 팬시박스 / 제이쿼리 -->
    <script src="/scripts/vendor/jquery.fancybox.min.js"></script>
    <script src="./lib/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>

    <!-- 카카오지도 -->
    <script
      charset="UTF-8"
      class="daum_roughmap_loader_script"
      src="https://ssl.daumcdn.net/dmaps/map_js_init/roughmapLoader.js"
    ></script>

    <!-- 만든 스크립트 -->
    <script src="js/wedding.js"></script>
    <script src="js/header.js"></script>
    <script src="js/scroll.js"></script>
    <script src="js/cont05_popup.js"></script>
    <script src="js/dropbox.js"></script>
    <script src="js/app.js"></script>
  </head>
  <body>
    <div id="wrap">
      <header id="header">
        <div class="inner">
          <figure>
            <img src="img/main_bg.png" alt="" />
          </figure>

          <div class="drawsvg">
            <svg version="1.1" viewBox="0 0 700 300">
              <symbol id="fade-text">
                <text x="30%" y="50%" text-anchor="middle">Our</text>
                <text x="72%" y="70%" text-anchor="middle">days !</text>
              </symbol>
              <g>
                <use class="stroke" xlink:href="#fade-text" />
                <use class="fill" xlink:href="#fade-text" />
              </g>
            </svg>
          </div>

          <div id="particles-js"></div>

          <script src="particles.js"></script>
        </div>
        <!-- inner -->
      </header>
      <!-- header end -->

      <main id="main">
        <!-- 소개 -->
        <section id="cont01" class="fade-in">
          <div class="cont01_img">
            <figure>
              <img src="img/wedding.png" alt="" />
            </figure>
          </div>
          <!-- cont01_img -->

          <div class="cont01_text">
            <div class="text01">
              그 어떤 <span>동</span>행으로도 표현할 수 없이<br />
              서로에게 <span>명</span>확히 다가온 사랑은 참 아름답습니다.<br />
              주님이 우리에게 주신 하루하루라는 선물을<br />
              함께 풀어보며 <span>예</span>쁜 사랑과 <span>빈</span>틈없는
              믿음으로<br />
              아름답게 살아가겠습니다.<br />
            </div>
            <!-- text01 -->

            <div class="text02">
              <p><span>김환순 • 서혜자</span> 의 차남 <span>김동명</span></p>
              <p><span>남진원 • 박미정</span> 의 장녀 <span>남예빈</span></p>
            </div>
            <!-- text02 -->
          </div>
          <!-- cont01_text -->

          <div class="call">
            <button>
              <p>연락하기</p>
            </button>
          </div>
          <!-- call -->

          <div class="call_popup" style="display: none">
            <div class="inner">
              <div class="popup_header">
                <p>연락하기</p>
              </div>
              <!-- popup_header -->

              <div class="popup_text">
                <div class="popup_sx">
                  <div>
                    <span>신랑</span>
                    <span>김동명</span>
                    <span>
                      <a>
                        <figure class="popup_call" id="call_1">
                          <img src="img/call_2.png" alt="전화하기" />
                        </figure>
                        <figure id="sms_1">
                          <img class="sms" src="img/mail.png" alt="문자하기" />
                        </figure>
                      </a>
                    </span>
                  </div>

                  <div>
                    <span>신랑 아버지</span>
                    <span>김환순</span>
                    <span>
                      <a>
                        <figure class="popup_call" id="call_2">
                          <img src="img/call_2.png" alt="전화하기" />
                        </figure>
                        <figure id="sms_2">
                          <img class="sms" src="img/mail.png" alt="문자하기" />
                        </figure>
                      </a>
                    </span>
                  </div>

                  <div class="last">
                    <span>신랑 어머니</span>
                    <span>서혜자</span>
                    <span>
                      <a>
                        <figure class="popup_call" id="call_3">
                          <img src="img/call_2.png" alt="전화하기" />
                        </figure>
                        <figure id="sms_3">
                          <img class="sms" src="img/mail.png" alt="문자하기" />
                        </figure>
                      </a>
                    </span>
                  </div>
                </div>
                <!-- man -->

                <div class="popup_sx">
                  <div>
                    <span>신부</span>
                    <span>남예빈</span>
                    <span>
                      <a>
                        <figure class="popup_call" id="call_4">
                          <img src="img/call_2.png" alt="전화하기" />
                        </figure>
                        <figure id="sms_4">
                          <img class="sms" src="img/mail.png" alt="문자하기" />
                        </figure>
                      </a>
                    </span>
                  </div>

                  <div>
                    <span>신부 아버지</span>
                    <span>남진원</span>
                    <span>
                      <a>
                        <figure class="popup_call" id="call_5">
                          <img src="img/call_2.png" alt="전화하기" />
                        </figure>
                        <figure id="sms_5">
                          <img class="sms" src="img/mail.png" alt="문자하기" />
                        </figure>
                      </a>
                    </span>
                  </div>

                  <div class="last_2">
                    <span>신부 어머니</span>
                    <span>박미정</span>
                    <span>
                      <a>
                        <figure class="popup_call" id="call_6">
                          <img src="img/call_2.png" alt="전화하기" />
                        </figure>
                        <figure id="sms_6">
                          <img class="sms" src="img/mail.png" alt="문자하기" />
                        </figure>
                      </a>
                    </span>
                  </div>
                </div>
                <!-- man -->
              </div>
              <!-- popup_text -->
            </div>
            <!-- inner -->

            <div class="call_close">
              <figure>
                <img src="img/close.png" alt="" />
              </figure>
            </div>
            <!-- call_close -->
          </div>
          <!-- call_popup -->
        </section>
        <!-- cont01 end -->

        <!-- 달력 -->
        <section id="cont02" class="fade-in">
          <div class="inner">
            <h1>THE WEDDING DAY</h1>

            <div class="month">
              <span>1</span>
              <span>2</span>
              <span>3</span>
              <span>4</span>
              <span>5</span>
            </div>
            <!-- month -->

            <div class="month_2">
              <div class="month_text">
                <span class="red">일</span>
                <span>월</span>
                <span>화</span>
                <span>수</span>
                <span>목</span>
                <span>금</span>
                <span>토</span>
              </div>
              <!-- month_text -->

              <div class="month_day">
                <div class="day day_1">
                  <span class="red">1</span>
                </div>
                <!-- day_1 -->

                <div class="day day_2">
                  <span class="red">2</span>
                  <span class="red">3</span>
                  <span>4</span>
                  <span>5</span>
                  <span>6</span>
                  <span>7</span>
                  <span class="wedding">8</span>
                  <p class="heart">
                    <img src="img/love.png" alt="" />
                  </p>
                </div>
                <!-- day_2 -->

                <div class="day day_3">
                  <span class="red">9</span>
                  <span>10</span>
                  <span>11</span>
                  <span>12</span>
                  <span>13</span>
                  <span>14</span>
                  <span>15</span>
                </div>
                <!-- day_3 -->

                <div class="day day_4">
                  <span class="red">16</span>
                  <span>17</span>
                  <span>18</span>
                  <span>19</span>
                  <span>20</span>
                  <span>21</span>
                  <span>22</span>
                </div>
                <!-- day_4 -->

                <div class="day day_5">
                  <span class="red">23</span>
                  <span>24</span>
                  <span>25</span>
                  <span>26</span>
                  <span>27</span>
                  <span>28</span>
                  <span>29</span>
                </div>
                <!-- day_5 -->

                <div class="day day_6">
                  <span class="red">30</span>
                  <span>31</span>
                </div>
                <!-- day_6 -->
              </div>
              <!-- month_day -->
            </div>
            <!-- month_2 -->

            <div class="wedding_day">
              <h2>우리의 예식까지 남은 시간</h2>
              <h3 id="remain-time"></h3>
            </div>
            <!-- wedding_day -->
          </div>
          <!-- inner -->
        </section>
        <!-- cont02 -->

        <!-- 갤러리 -->
        <section id="cont03" class="fade-in">
          <div class="inner">
            <p>갤러리</p>

            <div class="swiper mySwiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide">
                  <a href="img/1.png" data-fancybox="gallery">
                    <img src="img/1.png" alt="" />
                  </a>
                </div>
                <!-- swiper-slide -->
                <div class="swiper-slide">
                  <a href="img/2.png" data-fancybox="gallery">
                    <img src="img/2.png" alt="" />
                  </a>
                </div>
                <!-- swiper-slide -->
                <div class="swiper-slide">
                  <a href="img/3.png" data-fancybox="gallery">
                    <img src="img/3.png" alt="" />
                  </a>
                </div>
                <!-- swiper-slide -->
                <div class="swiper-slide">
                  <a href="img/4.PNG" data-fancybox="gallery">
                    <img src="img/4.PNG" alt="" />
                  </a>
                </div>
                <!-- swiper-slide -->
                <div class="swiper-slide">
                  <a href="img/5.png" data-fancybox="gallery">
                    <img src="img/5.png" alt="" />
                  </a>
                </div>
                <!-- swiper-slide -->
                <div class="swiper-slide">
                  <a href="img/5-1.png" data-fancybox="gallery">
                    <img src="img/5-1.png" alt="" />
                  </a>
                </div>
                <!-- swiper-slide -->
                <div class="swiper-slide">
                  <a href="img/6.png" data-fancybox="gallery">
                    <img src="img/6.png" alt="" />
                  </a>
                </div>
                <!-- swiper-slide -->
                <div class="swiper-slide">
                  <a href="img/7.png" data-fancybox="gallery">
                    <img src="img/7.png" alt="" />
                  </a>
                </div>
                <!-- swiper-slide -->
                <div class="swiper-slide">
                  <a href="img/8.png" data-fancybox="gallery">
                    <img src="img/8.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/10.png" data-fancybox="gallery">
                    <img src="img/10.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/11.png" data-fancybox="gallery">
                    <img src="img/11.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/12.png" data-fancybox="gallery">
                    <img src="img/12.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/13.png" data-fancybox="gallery">
                    <img src="img/13.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/14.png" data-fancybox="gallery">
                    <img src="img/14.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/15.png" data-fancybox="gallery">
                    <img src="img/15.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/16.png" data-fancybox="gallery">
                    <img src="img/16.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/17.png" data-fancybox="gallery">
                    <img src="img/17.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/18.png" data-fancybox="gallery">
                    <img src="img/18.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/19.png" data-fancybox="gallery">
                    <img src="img/19.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/20.png" data-fancybox="gallery">
                    <img src="img/20.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/21.png" data-fancybox="gallery">
                    <img src="img/21.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/22.png" data-fancybox="gallery">
                    <img src="img/22.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/23.png" data-fancybox="gallery">
                    <img src="img/23.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/24.png" data-fancybox="gallery">
                    <img src="img/24.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/25.png" data-fancybox="gallery">
                    <img src="img/25.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/26.png" data-fancybox="gallery">
                    <img src="img/26.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/27.png" data-fancybox="gallery">
                    <img src="img/27.png" alt="" />
                  </a>
                </div>
                <div class="swiper-slide">
                  <a href="img/278png" data-fancybox="gallery">
                    <img src="img/28.png" alt="" />
                  </a>
                </div>
              </div>
              <!-- swiper-wrapper -->
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
          <!-- inner -->
        </section>
        <!-- cont03 -->

        <!-- 오시는길 -->
        <section id="cont04" class="fade-in">
          <div class="inner">
            <h1>오시는 길</h1>

            <div class="location">
              <h2>센텀사이언스파크 23층 스카이홀</h2>
              <p>부산 해운대구 센텀중앙로 79</p>
            </div>
            <!-- location -->

            <div
              id="daumRoughmapContainer1730163576462"
              class="root_daum_roughmap root_daum_roughmap_landing"
            ></div>

            <div class="traffic">
              <div class="subway">
                <h1>지하철</h1>

                <span>• 2호선 센텀시티역 6번출구(도보 800m 직진)</span>
              </div>
              <!-- subway -->

              <div class="bus">
                <h1>버스</h1>

                <div>
                  <span>• 센텀시티역 벡스코 하차</span>
                  <p>- 5-1, 39, 40, 63, 141, 155, 1001, 1002, 107</p>
                </div>
                <div>
                  <span>• SK텔레콤 정류소 하차</span>
                  <p>- 115, 181, 307, 해운대구 3-1, 해운대구 3-2</p>
                </div>
              </div>
              <!-- bus -->

              <div class="free_bus">
                <h1>셔틀 운행</h1>

                <span>• 센텀시티역 4번출구 앞 셔틀버스 운행(15분 간격)</span>
              </div>
              <!-- free_bus -->

              <div class="car">
                <h1>주차</h1>

                <span>• 웨딩홀 주차장</span>
                <div>
                  <span>• knn 외부 주차장 이용가능</span>
                  <p>- 식사 여부 관계 없이 3시간 지원</p>
                </div>
              </div>
              <!-- car -->
            </div>
            <!-- traffic -->
          </div>
          <!-- inner -->
        </section>
        <!-- cont04 -->

        <section id="cont06" class="fade-in">
          <div class="inner">
            <h1>마음 전하실 곳</h1>
            <p>
              참석이 어려우신 분들을 위해 기재했습니다.<br />
              너그러운 마음으로 양해부탁드립니다.
            </p>

            <div class="dropdown">
              <button class="dropdown-button">신랑측</button>
              <div class="dropdown-content">
                <div class="dropdox">
                  <div class="man_name">
                    <p>신랑</p>
                    <p>김동명</p>
                  </div>

                  <div id="man_bank">
                    <div class="bank">
                      <p>하나은행</p>
                      <p id="account_1">272-910239-70007</p>
                    </div>

                    <div class="btn_bank">
                      <button onclick="copyToClipboard('account_1')">
                        복사
                      </button>

                      <button>
                        <a
                          href="https://qr.kakaopay.com/생성된QR코드주소"
                          target="_blank"
                        >
                          <figure>
                            <img
                              src="img/kakaopat02.png"
                              alt="카카오페이로 송금하기"
                            />
                          </figure>
                        </a>
                      </button>
                    </div>
                  </div>
                  <!-- btn_bank -->
                </div>
                <!-- dongmyoung -->

                <div class="dropdox">
                  <div class="man_name">
                    <p>신랑 아버지</p>
                    <p>김환순</p>
                  </div>

                  <div id="man_bank">
                    <div class="bank">
                      <p>농협은행</p>
                      <p>302-0918-8255-21</p>
                    </div>

                    <div class="btn_bank">
                      <button>
                        <a href="#">
                          <p>복사</p>
                        </a>
                      </button>

                      <button>
                        <a
                          href="https://qr.kakaopay.com/생성된QR코드주소"
                          target="_blank"
                        >
                          <figure>
                            <img
                              src="img/kakaopat02.png"
                              alt="카카오페이로 송금하기"
                            />
                          </figure>
                        </a>
                      </button>
                    </div>
                  </div>
                  <!-- btn_bank -->
                </div>
                <!-- dongmyoung -->
              </div>
            </div>
            <!-- man_dropdowm -->

            <div class="dropdown">
              <button class="dropdown-button">신부측</button>
              <div class="dropdown-content">
                <div class="dropdox">
                  <div class="woman_name">
                    <p>신부</p>
                    <p>남예빈</p>
                  </div>

                  <div id="woman_bank">
                    <div class="bank">
                      <p>하나은행</p>
                      <p>445-910496-60107</p>
                    </div>

                    <div class="btn_bank">
                      <button>
                        <a href="#">
                          <p>복사</p>
                        </a>
                      </button>

                      <button>
                        <a
                          href="https://qr.kakaopay.com/생성된QR코드주소"
                          target="_blank"
                        >
                          <figure>
                            <img
                              src="img/kakaopat02.png"
                              alt="카카오페이로 송금하기"
                            />
                          </figure>
                        </a>
                      </button>
                    </div>
                  </div>
                  <!-- btn_bank -->
                </div>
                <!-- dongmyoung -->

                <div class="dropdox">
                  <div class="woman_name">
                    <p>신부 아버지</p>
                    <p>남진원</p>
                  </div>

                  <div id="woman_bank">
                    <div class="bank">
                      <p>부산은행</p>
                      <p>219-12-021790-0</p>
                    </div>

                    <div class="btn_bank">
                      <button>
                        <a href="#">
                          <p>복사</p>
                        </a>
                      </button>

                      <button>
                        <a
                          href="https://qr.kakaopay.com/생성된QR코드주소"
                          target="_blank"
                        >
                          <figure>
                            <img
                              src="img/kakaopat02.png"
                              alt="카카오페이로 송금하기"
                            />
                          </figure>
                        </a>
                      </button>
                    </div>
                  </div>
                  <!-- btn_bank -->
                </div>
                <!-- dongmyoung -->

                <div class="dropdox">
                  <div class="woman_name">
                    <p>신부 어머니</p>
                    <p>박미정</p>
                  </div>

                  <div id="woman_bank">
                    <div class="bank">
                      <p>부산은행</p>
                      <p>224-12-001942-6</p>
                    </div>

                    <div class="btn_bank">
                      <button>
                        <a href="#">
                          <p>복사</p>
                        </a>
                      </button>

                      <button>
                        <a
                          href="https://qr.kakaopay.com/생성된QR코드주소"
                          target="_blank"
                        >
                          <figure>
                            <img
                              src="img/kakaopat02.png"
                              alt="카카오페이로 송금하기"
                            />
                          </figure>
                        </a>
                      </button>
                    </div>
                  </div>
                  <!-- btn_bank -->
                </div>
                <!-- dongmyoung -->
              </div>
            </div>
            <!-- man_dropdowm -->
          </div>
          <!-- inner -->
        </section>
        <!-- cont06 -->

        <section id="guestbook">
          <div id="first_text">
            <h1>방명록</h1>
            <div id="guestbook-list"></div>
            <button class="first_btn">
              <p>작성하기</p></button
            ><!-- first_btn -->
          </div>

          <!-- 방명록 작성 폼 -->
          <div id="modal-overlay" style="display: none"></div>

          <form id="guestbook-form" style="display: none">
            <h2>방명록</h2>

            <div>
              <label for="name">이 름 </label>
              <input type="text" id="name" maxlength="10" required />
              <p id="name-char-count">0/10</p>
            </div>
            <div>
              <label for="password">비밀번호</label>
              <input type="password" id="password" maxlength="4" required />
              <p id="password-char-count">0/4</p>
            </div>
            <div>
              <div>
                <label for="message">메시지</label>
                <textarea id="message" maxlength="200" required></textarea>
              </div>
              <p id="message-char-count">0/200</p>
            </div>
            <button type="submit" id="close-btn">작성</button>

            <div id="close-btn02" class="popup_close">
              <figure>
                <img src="img/close.png" alt="" />
              </figure>
            </div>
          </form>

          <!-- 방명록 목록 -->
          <div id="pagination-container"></div>
        </section>

        <!-- 비밀번호 확인 모달 -->
        <div id="password-modal" style="display: none">
          <div class="modal-content">
            <h3>비밀번호 확인</h3>
            <input
              type="password"
              id="modal-password"
              placeholder="비밀번호 입력"
            />
            <button id="confirm-delete">확인</button>
            <button id="cancel-delete">취소</button>
          </div>
        </div>
      </main>
      <!-- main -->
      <footer id="footer">
        <p>Copyright © Ruby. All Rights Reserved.</p>
      </footer>
      <!-- footer -->
    </div>
    <!-- wrap end -->

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Initialize Swiper -->
    <script>
      var swiper = new Swiper(".mySwiper", {
        loop: true,
        slidesPerView: "auto",
        centeredSlides: true,
        spaceBetween: 0,
        pagination: {
          el: ".swiper-pagination",
          type: "fraction",
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });

      Fancybox.bind('[data-fancybox="gallery"]', {
        zoom: false, // 확대 비활성화
        dragToClose: false, // 드래그하여 닫기 비활성화
        doubleClick: false, // 더블클릭 확대 비활성화
        wheel: false, // 마우스 휠 확대 비활성화
        Toolbar: {
          display: {
            left: [],
            middle: ["prev", "infobar", "next"],
            right: ["close"],
          },
        },
        Image: {
          click: false, // 클릭 시 확대 비활성화
          wheel: false, // 마우스 휠 확대 비활성화
        },
      });

      new daum.roughmap.Lander({
        timestamp: "1730163576462",
        key: "2m37k",
        mapWidth: "640",
        mapHeight: "360",
      }).render();

      document.addEventListener("contextmenu", (event) => {
        event.preventDefault();
        // alert("이 페이지에서는 우클릭이 금지되어 있습니다.");
      });
    </script>

    <script type="module">
      import { setupInputListeners } from "./js/main.js";
      import {
        submitGuestbook,
        displayGuestbookWithCustomPagination,
        listGuestbook,
        deleteGuestbook,
      } from "./js/firebase.js";

      // 입력 리스너 설정
      setupInputListeners();

      const guestbookForm = document.getElementById("guestbook-form");
      const guestbookList = document.getElementById("guestbook-list");
      const passwordModal = document.getElementById("password-modal");
      const modalPassword = document.getElementById("modal-password");
      const confirmDelete = document.getElementById("confirm-delete");
      const cancelDelete = document.getElementById("cancel-delete");

      let currentDeleteId = null; // 삭제할 항목의 ID 저장

      // 방명록 작성 이벤트
      guestbookForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("name").value;
        const message = document.getElementById("message").value;
        const password = document.getElementById("password").value;

        if (name && message && password) {
          submitGuestbook(name, message, password, (success) => {
            if (success) {
              alert("방명록이 저장되었습니다!");
              guestbookForm.reset();
            } else {
              alert("방명록 저장에 실패했습니다. 다시 시도해주세요.");
            }
          });
        } else {
          alert("모든 필드를 입력해주세요!");
        }
      });

      // 방명록 표시 함수
      function displayGuestbook(messages) {
        guestbookList.innerHTML = ""; // 기존 목록 초기화
        if (messages.length > 0) {
          messages.forEach((msg) => {
            const item = document.createElement("div");
            item.innerHTML = `
        <p><strong>${msg.name}</strong> - ${msg.timestamp}</p>
        <p>${msg.message}</p>
        <button class="delete-button" onclick="openDeleteModal('${msg.id}')">X</button>
      `;
            guestbookList.appendChild(item);
          });
        } else {
          guestbookList.innerHTML =
            "<p>방명록이 비어 있습니다. <br />첫 글을 작성해 주세요!</p>";
        }
      }

      // 삭제 버튼 클릭 시 모달 열기
      window.openDeleteModal = (id) => {
        currentDeleteId = id; // 삭제할 항목의 ID 저장
        modalPassword.value = ""; // 입력 필드 초기화
        passwordModal.style.display = "flex"; // 모달 열기
      };

      // 모달의 확인 버튼 클릭 시 삭제 실행
      confirmDelete.addEventListener("click", () => {
        const password = modalPassword.value;
        if (currentDeleteId && password) {
          deleteGuestbook(currentDeleteId, password, (success) => {
            if (success) {
              alert("방명록이 삭제되었습니다!");
            } else {
              alert("비밀번호가 일치하지 않습니다.");
            }
            passwordModal.style.display = "none"; // 모달 닫기
          });
        }
      });

      // 모달의 취소 버튼 클릭 시 모달 닫기
      cancelDelete.addEventListener("click", () => {
        passwordModal.style.display = "none"; // 모달 닫기
      });

      // 방명록 데이터 가져오기 및 렌더링
      listGuestbook((messages) => {
        if (messages.length > 0) {
          displayGuestbookWithCustomPagination(messages);
        } else {
          const guestbookList = document.getElementById("guestbook-list");
          guestbookList.innerHTML =
            "<p>방명록이 비어 있습니다. <br />첫 글을 작성해 주세요!</p>";
        }
      });

      Fancybox.bind('[data-fancybox="gallery"]', {
        zoom: false, // 확대 비활성화
        dragToClose: false, // 드래그하여 닫기 비활성화
        doubleClick: false, // 더블클릭 확대 비활성화
        wheel: false, // 마우스 휠 확대 비활성화
        Toolbar: {
          display: {
            left: [],
            middle: ["prev", "infobar", "next"],
            right: ["close"],
          },
        },
        Image: {
          click: false, // 클릭 시 확대 비활성화
          wheel: false, // 마우스 휠 확대 비활성화
        },
      });

      // 카카오페이 QR 코드 URL로 연결
      function openKakaoPayQR() {
        window.open("https://qr.kakaopay.com/생성된QR코드주소", "_blank");
      }
    </script>
    <script src="js/callAndSMS.js"></script>
  </body>
</html>
